<!doctype html>
<html>
  <head>
  </head>
  <body>
   
    <canvas id="lienzo" width="160" height="120"></canvas>
    <script>
    	//////////////////////////////// VARIABLES GLOBALES //////////////////////////////
    	
        const lienzo = document.getElementById('lienzo');
        const contexto = lienzo.getContext('2d');
        const socket = new WebSocket("wss://jotauve.es:3000");      // Creo una nueva conexión de sockets
        
        //////////////////////////////// VARIABLES GLOBALES //////////////////////////////
        
        //////////////////////////////// ABRO CONEXION DE SOCKET //////////////////////////////
        
        socket.addEventListener("open", (event) => {                // Cuando alguien me abre una conexion
          console.log("WebSocket connection opened");               // Se ha abierto una conexion
        	
        });

        socket.addEventListener("error", (event) => {               // en el caso de que haya un error
          console.error("WebSocket error:", event);                 // intenta decirme donde esta el error
        });
        
        //////////////////////////////// ABRO CONEXION DE SOCKET //////////////////////////////
        
        //////////////////////////////// RECIBO MENSAJES DEL SOCKET //////////////////////////////
        
        socket.addEventListener("message", (event) => {             // Cuando el servidor envíe un mensjae              
          let  datos = JSON.parse(event.data)                       // Datos es lo que me envie el servidor, pero pasalo a json
          console.log("El servidor me dice:")
          console.log(datos)
        });
        
        //////////////////////////////// RECIBO MENSAJES DEL SOCKET //////////////////////////////
        
    </script>
  </body>
</html>